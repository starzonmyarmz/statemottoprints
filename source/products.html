<section id="products">
  {% if page.full_url contains 'search=' %}
    <h2>Search Results</h2>
  {% endif %}
  <div class="wrapper">
    {% paginate products from products.current by theme.products_per_page %}
      {% if products != blank %}
        <div class="grid">
          {% for product in products %}

            <div class="column {{ product.css_class }}">
              <a href="{{ product.url }}">
                <img src="{{ product.image | product_image_url size: theme.product_image_size }}" alt="Image of {{ product.name | escape }}">
                <h4>{{ product.name }}</h4>
                <div class="price">{{ product.default_price | money_with_sign | remove: ".00" }}</div>
                {% if product.on_sale %}
                  <div class="sale">On Sale</div>
                {% endif %}
              </a>
            </div>

        {% endfor %}
        </div>

        {{ paginate | default_pagination }}
      {% else %}
        <div class="empty">
          <p>Sorry, but there are products found matching your search.</p>
        </div>
      {% endif %}
    {% endpaginate %}
  </div>
</section>
